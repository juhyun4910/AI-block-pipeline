{% extends "base.html" %}
{% block title %}프로젝트 상세 설명{% endblock %}
{% block content %}
<section class="overview">
  <h1>드래그 앤 드랍 AI 파이프라인 빌더 — 프로젝트 개요</h1>
  <p class="lead">
    문서 기반 RAG 파이프라인을 비전공자도 쉽게 구성·배포할 수 있도록 하는 FastAPI 기반 Python 프로젝트의
    설계 및 구현 방향을 정리했습니다.
  </p>

  <div class="overview-grid">
    <article>
      <h2>1. 초록(요약)</h2>
      <p>
        사용자가 문서를 업로드하면 시스템이 자동으로 인덱싱하고, 하이브리드 검색과 LLM을 결합한 RAG 파이프라인으로
        근거 중심 답변을 생성합니다. 근거 인용과 가드레일(PII 마스킹, 금칙어 필터)이 내장되어 있고, 구축한 플로우는 웹앱·위젯·API로
        배포 및 평가할 수 있습니다. 초기 MVP는 Ollama, Postgres+pgvector, MinIO, FastAPI, Next.js, Docker로 구성된 무료 스택을 사용합니다.
      </p>
    </article>

    <article>
      <h2>2. 문제 정의 및 동기</h2>
      <ul>
        <li>일반 챗봇은 근거 강제, 정책 준수, 표준화된 배포/운영이 어렵습니다.</li>
        <li>현업과 교육 현장에서는 문서 기반 질의가 많으며, 출처 투명성과 재현성이 중요합니다.</li>
        <li>개발자 의존 없이 블록 조립으로 파이프라인을 설계·운용할 수 있는 도구가 필요합니다.</li>
      </ul>
    </article>

    <article>
      <h2>3. 핵심 기여</h2>
      <ol>
        <li>시각화된 파이프라인 빌더: 업로드→인덱싱→검색→LLM→가드→출력의 흐름을 블록으로 표현</li>
        <li>근거 인용과 가드레일 내장: 환각 억제 및 개인정보/정책 준수 강화</li>
        <li>운영 기능: 원클릭 배포, 로그/메트릭, A/B 평가 지원</li>
        <li>무료 스택 기반: 로컬 환경에서 비용 없이 시연 가능</li>
      </ol>
    </article>

    <article>
      <h2>4. 대표 사용 시나리오</h2>
      <ul>
        <li>사내 규정/정책 Q&A 자동화 (조항·페이지 인용 포함)</li>
        <li>제품 매뉴얼 헬프봇 (설치/고장 진단 안내)</li>
        <li>강의/교육 Q&A (슬라이드·지침 인용 중심)</li>
      </ul>
    </article>

    <article>
      <h2>5. 시스템 아키텍처</h2>
      <p>
        프런트엔드는 Next.js와 React Flow로 블록 캔버스를 제공합니다. FastAPI 백엔드는 프로젝트·데이터셋 API와 presigned URL을 관리하며,
        Ollama 모델 런타임, Postgres+pgvector, MinIO, Redis가 데이터 처리와 저장을 담당합니다. Docker Compose로 로컬 개발 환경을 구성합니다.
      </p>
      <p>
        데이터 흐름은 파일 업로드 → 텍스트 추출 → 청크/임베딩 → pgvector 저장 → 질문 임베딩 → 하이브리드 검색 → LLM 생성 → 근거 인용
        → 로그 기록 순으로 진행됩니다.
      </p>
    </article>

    <article>
      <h2>6. 블록(노드) 설계</h2>
      <p>각 블록 유형과 대표 아이콘:</p>
      <ul class="two-column">
        <li>데이터(📁) – 업로드, 커넥터</li>
        <li>인덱싱(⚙️) – 추출, 청크, 임베딩</li>
        <li>검색(🔍) – top_k, 하이브리드, 재랭킹</li>
        <li>LLM(💬) – 모델, 프롬프트, 파라미터</li>
        <li>가드(🛡️) – PII 마스킹, 금칙어 필터</li>
        <li>출력(📦) – 웹앱/위젯/API 배포</li>
      </ul>
    </article>

    <article>
      <h2>7. 구현 상세 (Python/FastAPI 중심)</h2>
      <h3>주요 API 엔드포인트</h3>
      <ul>
        <li>POST /datasets/upload – presigned PUT 발급</li>
        <li>POST /datasets/{dataset}/files/{file}/commit – 업로드 완료</li>
        <li>POST /datasets/{dataset}/index – 비동기 인덱싱</li>
        <li>POST /ask – 질문, 검색, LLM 응답</li>
        <li>GET /runs/{id} – 실행 로그 및 메트릭</li>
      </ul>
      <h3>데이터 스키마 요약</h3>
      <p>
        <code>project</code>, <code>dataset</code>, <code>file</code>, <code>chunk</code>, <code>run</code> 테이블로 구성되며,
        pgvector 컬럼을 활용해 임베딩을 저장합니다.
      </p>
      <h3>기술 선택 근거</h3>
      <ul>
        <li>pgvector: Postgres 내 임베딩 유사도 검색</li>
        <li>MinIO: S3 호환 로컬 오브젝트 스토리지</li>
        <li>Ollama: 로컬 모델 실행으로 네트워크 비용/보안 우려 최소화</li>
      </ul>
    </article>

    <article>
      <h2>8. 보안·윤리·컴플라이언스</h2>
      <ul>
        <li>RBAC 기반 권한 관리</li>
        <li>PII 마스킹 및 감사 로그</li>
        <li>근거 기반 프롬프트와 콘텐츠 안전 필터</li>
      </ul>
    </article>

    <article>
      <h2>9. 평가 계획</h2>
      <p>
        정확도(근거 일치율, 인간 평가), 효율성(p95 지연, 토큰 사용량), 운영성(성공률, 실패 유형)을 측정하며,
        A/B 실험으로 chunking, top_k, 모델 조합의 성능 향상과 비용 절감을 목표로 합니다.
      </p>
    </article>

    <article>
      <h2>10. 한계 및 위험</h2>
      <ul>
        <li>OCR 필요 시 정확도 저하 가능</li>
        <li>긴 문서/표 처리 한계</li>
        <li>소형 로컬 모델 품질 제한 → 클라우드 모델로 교체 가능</li>
      </ul>
    </article>

    <article>
      <h2>11. 12주 로드맵</h2>
      <p>
        업로드/인덱싱 파이프라인 구현(1–2주)에서 시작해 캔버스 빌더, 배포 기능, 평가 및 대시보드, 가드레일 고도화,
        하드닝과 알파 테스트까지 단계별로 진행합니다.
      </p>
    </article>

    <article>
      <h2>12. 데모 시나리오</h2>
      <ol>
        <li>템플릿 선택 → 문서 업로드 → 인덱싱</li>
        <li>질문 입력: “국내선 항공권 등급 제한?”</li>
        <li>답변 + 근거 출력, 메트릭 확인</li>
        <li>검색 Top K 조정 후 재실행</li>
        <li>웹앱/위젯 배포</li>
      </ol>
    </article>

    <article>
      <h2>13. 기대 효과</h2>
      <p>
        근거 인용과 가드레일을 통한 신뢰성 확보, 시각적 조립으로 인한 자율 구성 및 재현성 향상, 무료 스택 기반 실습 환경 제공 등
        교육·연구·기업 현장에서 폭넓게 활용될 수 있습니다.
      </p>
    </article>

    <article>
      <h2>부록</h2>
      <h3>A. 최소 실행 환경</h3>
      <ul>
        <li>Docker Compose로 Postgres+pgvector, Redis, MinIO, Ollama 기동</li>
        <li>모델 다운로드: <code>ollama pull llama3.1:8b</code>, <code>ollama pull nomic-embed-text</code></li>
        <li>FastAPI: <code>uvicorn app.main:app --reload --port 8000</code></li>
        <li>Next.js: <code>npm run dev</code></li>
      </ul>
      <h3>B. 프롬프트 가드 예시</h3>
      <p>
        “제공된 근거에서만 답변하고, 근거 부족 시 ‘모른다’고 답하며, 사용한 문서명/페이지를 출력에 포함한다.”
      </p>
    </article>
  </div>
</section>
{% endblock %}
